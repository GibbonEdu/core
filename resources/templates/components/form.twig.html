{#<!--
Gibbon, Flexible & Open School System
Copyright (C) 2010, Ross Parker

This is a Gibbon template file, written in HTML and Twig syntax.
For info about editing, see: https://twig.symfony.com/doc/2.x/
-->#}

<form {{ form.getAttributeString|raw }} onsubmit="gibbonFormSubmitted(this)">

    {% if form.getTitle %}
        <h2>{{ form.getTitle }}</h2>
    {% endif %}

    {% for values in form.getHiddenValues %}
        <input type="hidden" name="{{ values.name }}" value="{{ values.value }}">
    {% endfor %}

    <table class="{{ form.getClass }} px-3 py-2 sm:p-0" cellspacing=0>
    {% for row in form.getRows %}
        <tr id="{{ row.getID }}" class="{{ row.getClass|replace({'standardWidth': ''}) }} flex flex-col sm:flex-row justify-between content-center p-0">

        {% for element in row.getElements %}
            {% set colspan = loop.last and loop.length < totalColumns ? (totalColumns + 1 - loop.length) : 0  %}
            
            {% if element.isInstanceOf('Gibbon\\Forms\\Layout\\Label') %}
                {% set class = 'flex flex-col flex-grow justify-center -mb-1 sm:mb-0' %}
            {% elseif "smallIntBorder" in form.getClass or "noIntBorder" in form.getClass %}
                {% set class = loop.last and loop.length > 1 ? 'w-full max-w-full sm:max-w-xs justify-center' : 'flex-grow justify-center' %}  
            {% else %}
                {% set class = 'flex-grow justify-center' %}  
            {% endif %}

            <td class="{{ element.getClass|replace({'standardWidth': ''}) }} {{ class }} px-2 border-b-0 sm:border-b border-t-0" {{ colspan ? 'colspan="%s"'|format(colspan)|raw }}>
                {{ element.getOutput|replace({'standardWidth': 'w-full' })|raw }}
            </td>
        {% endfor %}

        </tr>
    {% endfor %}
    </table>

    {% for code in javascript %}
        <script type="text/javascript">
        {{ code|raw }}
        </script>
    {% endfor %}
</form>
